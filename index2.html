<!DOCTYPE html>

<head>
    <title> Surprise Me Travel</title>
    <!-- <script src= "MDB Free/js/mdb.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.0/css/mdb.min.css" rel="stylesheet">


    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.0/js/mdb.min.js"></script>

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-6">
                <form>
                    <span id="yourCity">Your City:
                        <br>
                        <input id="destination" type="text">
                        <br>

                        <!-- <div class="dropdown">
                        Trigger-->
                        <!-- <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Choose an Activity</button>
                         -->
                        <!--Menu-->
                        <!-- <div class="dropdown-menu dropdown-primary">
                            <a class="dropdown-item" href="#">Hiking</a>
                            <a class="dropdown-item" href="#">Running</a>
                            <a class="dropdown-item" href="#">Baseball</a>
                            <a class="dropdown-item" href="#">Crafts</a>
                        </div>
                    </div> -->

                        <div class="form-check">
                            <!-- <input type="checkbox" class="filled-in form-check-input" id="checkbox101">
                            <label class="form-check-label" for="checkbox101">Hiking</label>
                            <br>
                            <input type="checkbox" class="filled-in form-check-input" id="checkbox102">
                            <label class="form-check-label" for="checkbox101">Running</label>
                            <br>
                            <input type="checkbox" class="filled-in form-check-input" id="checkbox103">
                            <label class="form-check-label" for="checkbox101">Baseball</label>
                            <br>
                            <input type="checkbox" class="filled-in form-check-input" id="checkbox104">
                            <label class="form-check-label" for="checkbox101">Crafts</label>
                            <br> -->
                            <input id="submit" value="Submit" type="submit">
                        </div>
                    </span>
                </form>
            </div>
            <div class="col-6">
                <span id="yourCity">Your City:
                    <br>
                    <input id="destination2" type="text">
                    <br>
                    <input id="surpriseSubmit" value="Surprise Me!" type="submit">
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div id="results"></div>
            </div>
        </div>
    </div>


    <script>
        //This is the regular button that will list 10 restaurants, 10 things to do, and 10 hotel accomodations
        $(document).ready(function () {

            $(document).on("click", "#submit", function (event) {
                event.preventDefault();
                // if ($(".filled-in form-check-input").is(":checked")) {
                //     var checkboxValue = $(this).text();
                //     console.log(checkboxValue);
                // } else { console.log("error") };

                var destination = $("#destination").val().trim();
                console.log(destination);


                var queryURL = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurants+in+" + destination + "&key=AIzaSyCNDmPqZOjXBhXXOgsRpnFMEELte5ssmi4";
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function (response) {
                    var results = response.results;
                    console.log(results);

                    for (var i = 0; i < 10; i++) {
                        var placeId = results[i].place_id;
                        var restDiv = $("<div class='item'>");
                        var restName = results[i].name;
                        var restAddress = results[i].formatted_address;
                        var rating = results[i].rating;
                        var hours = results[i].opening_hours;
                        var photo = $("<img>");
                        var icon = $("<img>");
                        icon.attr("src", results[i].icon)
                        photo.attr("src", results[i].photos[0])
                        var p = $("<p>").text(restName + icon);
                        var p2 = $("<p>").text(photo);
                        var p3 = $("<p>").text(rating);
                        var p4 = $("<p>").text(restAddress);
                        var p5 = $("<p>").text(hours);
                        p.addClass("p");
                        restDiv.append(p5);
                        restDiv.prepend(p4);
                        restDiv.prepend(p3);
                        restDiv.prepend(p2);
                        restDiv.prepend(p);
                        $("#results").prepend(restDiv);
                    }

//                     var destination = $("#destination").val().trim();
//                     console.log(destination);

// //not ready yet!
//                     var queryURL = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=hotels+in+" + destination + "&key=AIzaSyCNDmPqZOjXBhXXOgsRpnFMEELte5ssmi4";
//                     $.ajax({
//                         url: queryURL,
//                         method: "GET"
//                     }).then(function (response) {
//                         var results = response.results;
//                         console.log(results);
//                     for (var i = 0; i < results.length; i++) {
//                         var restDiv = $("<div class='item'>");
//                         var restName = results[i].name;
//                         var restAddress = results[i].formatted_address;
//                         var rating = results[i].rating;
//                         var hours = results[i].opening_hours;
//                         var photo = $("<img>");
//                         var icon = $("<img>");
//                         icon.attr("src", results[i].icon)
//                         photo.attr("src", results[i].photos[0])
//                         var p = $("<p>").text(restName + icon);
//                         var p2 = $("<p>").text(photo);
//                         var p3 = $("<p>").text(rating);
//                         var p4 = $("<p>").text(restAddress);
//                         var p5 = $("<p>").text(hours);
//                         p.addClass("p");
//                         restDiv.append(p5);
//                         restDiv.prepend(p4);
//                         restDiv.prepend(p3);
//                         restDiv.prepend(p2);
//                         restDiv.prepend(p);
//                         $("#results").prepend(restDiv);
                    });
                });
            });

            //this is the "suprise me" button
            //make 3 arrays- 1 for each: restaurant, hotel, thing to do
            //lots of ajax calls....  all push to the correct array
            //grab a random item from each array and display it to the DOM

            $(document).on("click", "#surpriseSubmit", function (event) {
                event.preventDefault();

                var destination2 = $("#destination2").val().trim();
                console.log(destination2);

                var restArray = [];
                var hotelArray = [];
                var thingsToDoArray = [];

                //Things to do:
                var queryURL = "http://api.amp.active.com/v2/search/?query=hiking&city=" + destination2 + "&api_key=ycnepqze277jjgemf6hc4gyd";
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function (response) {
                    var results = response.results;
                    console.log(results);

                    for (var i = 0; i < results.length; i++) {

                        var toDoURL = results[i].registrationUrlAdr;
                        var logo = $("<img>");
                        logo.attr("src", results[i].logoUrlAdr);
                        var p = $("<p>").text("More Info: " + toDoURL);
                        p.addClass("p");
                        var toDo = results[i].assetName;
                        var toDoObj = {
                            "Thing to Do: ": toDo,
                            "URL: ": toDoURL,
                            "Logo: ": logo
                        };
                        thingsToDoArray.push(toDoObj);
                    };

                    var queryURL = "http://api.amp.active.com/v2/search/?query=baseball&city=" + destination2 + "&api_key=ycnepqze277jjgemf6hc4gyd";
                    $.ajax({
                        url: queryURL,
                        method: "GET"
                    }).then(function (response) {
                        var results = response.results;
                        console.log(results);

                        for (var i = 0; i < results.length; i++) {

                            var toDoURL = results[i].registrationUrlAdr;
                            var logo = $("<img>");
                            logo.attr("src", results[i].logoUrlAdr);
                            var p = $("<p>").text("More Info: " + toDoURL);
                            p.addClass("p");
                            var toDo = results[i].assetName;
                            var toDoObj = {
                                "Thing to Do: ": toDo,
                                "URL: ": toDoURL,
                                "Logo: ": logo
                            };
                            thingsToDoArray.push(toDoObj);
                        };

                        console.log(thingsToDoArray);

                    });
                    var random = thingsToDoArray[Math.floor(Math.random() * thingsToDoArray.length)];
                    console.log(random);

                    // $("#results").append(JSON.stringify(random));
                    $("#results").append(random.toDo);
                    $("#results").append(random.toDoURL);
                    $("#results").append(random.logo);
                });
            });


    </script>

</body>

</html>